# Phase 2 Assignment — 주문/결제 API 안정화 (구체화)

## 과제명
**"주문 생성 유스케이스 안정화 + 조회 성능 개선"**

## 비즈니스 컨텍스트
- 프로모션 시간 주문 폭증으로 결제 실패율 증가
- CS 문의 원인: 주문 상태 불일치, 느린 조회 API

## 목표 지표
- 주문 생성 API 성공률 99.5%+
- 주문 조회 API p95 < 500ms
- 결제 실패 후 상태 불일치 0건

---

## 필수 요구사항

### A. 주문 생성 API
- 엔드포인트: `POST /api/orders`
- 성공 응답: `201 Created + orderId`
- 실패 응답: 표준 에러 포맷
- 필수 구현
  1. 유효성 검증
  2. 쿠폰 정책 적용
  3. 재고 확인
  4. 주문 생성
  5. 결제 요청(모의 어댑터)
  6. 상태 전이 저장

### B. 주문 조회 API
- 엔드포인트
  - `GET /api/orders?userId={id}`
  - `GET /api/orders/{orderId}`
- 요구사항
  - N+1 개선 전/후 비교표
  - 페이징 전략 근거 작성

### C. 운영 표준
- 구조화 로그(JSON)
- traceId 전파
- 핵심 지표 기록: 실패율, 지연시간, 재시도 횟수

---

## 제출물
1. 코드
2. `TEST_REPORT.md`
3. `PERF_REPORT.md`
4. `ADR-001-transaction-boundary.md`
5. API 명세(OpenAPI 또는 Markdown)

## 평가 기준 (100)
- 정확성 30
- 설계/트랜잭션 30
- 성능 20
- 테스트/운영성 20

## 보너스(+10)
- Outbox 패턴 시범 적용
- 결제 장애 주입 테스트 자동화
