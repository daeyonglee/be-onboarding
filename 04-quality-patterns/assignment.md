# Phase 4 Assignment — 프로모션/주문 상태 리팩토링

## 과제명
**"프로모션 엔진 구조 개선 + 주문 상태 전이 코드 품질 고도화"**

## 문제 배경
- 프로모션 로직이 if-else 400+ 줄로 유지보수 어려움
- 신규 국가 론칭 시 조건 분기 급증
- 주문 상태 전이 로직이 여러 서비스에 중복 존재

## 목표
- 신규 프로모션 타입 추가 시 기존 코드 수정 최소화(OCP)
- 주문 상태 전이 단일 책임화
- 코드리뷰에서 이해 가능한 수준의 가독성 확보

---

## 필수 요구사항

### A. 프로모션 엔진
- Strategy + Factory 패턴 적용
- 최소 4개 전략 구현
- 우선순위 충돌 규칙 명시

### B. 주문 상태 전이
- 상태 전이 규칙을 단일 컴포넌트로 이동
- 허용 전이표(state transition table) 작성
- 불법 전이 시 도메인 예외 처리

### C. 품질 목표
- 핵심 유스케이스 테스트 커버리지 80%+
- cyclomatic complexity 상위 메서드 20% 이상 개선
- 중복 코드 라인 30% 이상 감소

---

## 제출물
1. 코드
2. `PROMOTION_RULES.md`
3. `STATE_TRANSITION_TABLE.md`
4. `REFACTORING_REPORT.md` (전/후 지표 포함)
5. `TEST_REPORT.md`

## 평가 기준 (100)
- 설계/패턴 적용 35
- 코드 품질 개선도 25
- 테스트 안정성 20
- 문서/설명력 20

## 보너스(+10)
- ArchUnit/정적 분석 룰로 아키텍처 제약 자동검증
